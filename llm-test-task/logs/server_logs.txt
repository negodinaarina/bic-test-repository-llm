2025-09-11 00:08:59,044 - INFO - OK | GET /models | handler=get_models_names | time=0.4200s | status_code=200
2025-09-11 00:09:14,590 - INFO - OK | GET /models | handler=get_models_names | time=0.4693s | status_code=200
2025-09-11 00:10:54,423 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=62.1981s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 271, in __aiter__
    async for part in self._httpcore_stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 407, in __aiter__
    raise exc from None
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 403, in __aiter__
    async for part in self._stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 342, in __aiter__
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 334, in __aiter__
    async for chunk in self._connection._receive_response_body(**kwargs):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 203, in _receive_response_body
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 32, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 14, in post_model_prompt
    response = await open_router_client.post_prompt(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/openrouter/client.py", line 25, in post_prompt
    r = await self._post(url="/completions", json={
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 64, in _post
    return await self._make_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 32, in _make_request
    response = await client.request(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1643, in send
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1637, in send
    await response.aread()
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 979, in aread
    self._content = b"".join([part async for part in self.aiter_bytes()])
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 997, in aiter_bytes
    async for raw_bytes in self.aiter_raw():
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 1055, in aiter_raw
    async for raw_stream_bytes in self.stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 176, in __aiter__
    async for chunk in self._stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 270, in __aiter__
    with map_httpcore_exceptions():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

2025-09-11 00:12:42,258 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0012s | status_code=200
2025-09-11 00:12:42,408 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0031s | status_code=200
2025-09-11 00:16:14,155 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=63.5744s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 271, in __aiter__
    async for part in self._httpcore_stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 407, in __aiter__
    raise exc from None
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 403, in __aiter__
    async for part in self._stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 342, in __aiter__
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 334, in __aiter__
    async for chunk in self._connection._receive_response_body(**kwargs):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 203, in _receive_response_body
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 32, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 14, in post_model_prompt
    response = await open_router_client.post_prompt(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/openrouter/client.py", line 25, in post_prompt
    r = await self._post(url="/completions", json={
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 64, in _post
    return await self._make_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 32, in _make_request
    response = await client.request(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1643, in send
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1637, in send
    await response.aread()
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 979, in aread
    self._content = b"".join([part async for part in self.aiter_bytes()])
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 997, in aiter_bytes
    async for raw_bytes in self.aiter_raw():
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 1055, in aiter_raw
    async for raw_stream_bytes in self.stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 176, in __aiter__
    async for chunk in self._stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 270, in __aiter__
    with map_httpcore_exceptions():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

2025-09-11 00:17:09,189 - INFO - OK | GET /models | handler=get_models_names | time=0.4266s | status_code=200
2025-09-11 00:18:13,750 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=39.2424s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 32, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 177, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'missing', 'loc': ('response', 'text'), 'msg': 'Field required', 'input': {'id': 'gen-1757539055-qyK2Sb8e6XyBg5vwd5QB', 'provider': 'DeepInfra', 'model': 'deepseek/deepseek-chat-v3.1:free', 'object': 'chat.completion', 'created': 1757539055, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'text': " –∏ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ —Å—Ç–∏–ª–µ –ï—Å–µ–Ω–∏–Ω–∞', 'assistant': 'assistant', 'created_at': datetime.datetime(2023, 10, 16, 18, 54, 25, 537000), 'id': 8, 'local_id': 8, 'conversation_id': 2, 'parent': 7, 'children': [9], 'is_error': False, 'generation_info': None, 'metadata': {}}), HumanMessage(content='–ù–∞–ø–∏—à–∏ —Å—Ç–∏—Ö –ø—Ä–æ Python –∏ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ —Å—Ç–∏–ª–µ –ï—Å–µ–Ω–∏–Ω–∞', additional_kwargs={}, example=False), AIMessage(content='–ö–∞–∫ –ï—Å–µ–Ω–∏–Ω, —è –ø–æ–ø—Ä–æ–±—É—é –ø–µ—Ä–µ–¥–∞—Ç—å –¥—É—à—É Python –≤ —Å—Ç–∏—Ö–∞—Ö:\\n\\n**Python**\\n\\n–í —Å–∞–¥—É —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –≥–¥–µ –∫–æ–¥ —Ü–≤–µ—Ç—ë—Ç,\\n–°—Ä–µ–¥–∏ –≤–µ—Ç–≤–µ–π –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ Python –∂–∏–≤—ë—Ç.\\n–ï–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ‚Äî –∫–∞–∫ —Ç–∏—Ö–∏–π —à–µ–ø–æ—Ç –ª–∏—Å—Ç—å–µ–≤,\\n–í –Ω—ë–º –º–æ—â—å —Å–æ–∫—Ä—ã—Ç–∞, —á—Ç–æ –≤ –º–∏—Ä–µ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è.\\n\\n–û, Python, —Ç—ã –ø—Ä–æ—Å—Ç –∏ —ç–ª–µ–≥–∞–Ω—Ç–µ–Ω,\\n–ö–∞–∫ –æ—Å–µ–Ω—å—é –∫–ª—ë–Ω, —á—Ç–æ –∑–æ–ª–æ—Ç–æ–º –±–æ–≥–∞—Ç.\\n–¢—ã —Å–ø–∏—à—å –≤ –≤–µ—á–µ—Ä–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö —Ç—É–º–∞–Ω–∞—Ö,\\n–ß—Ç–æ–± —É—Ç—Ä–æ–º –º–∏—Ä –±—É–¥–∏—Ç—å —Å–≤–æ–π –∞—Ä–æ–º–∞—Ç.\\n\\n–¢—ã –º–æ–∂–µ—à—å –≤—Å—ë: –æ—Ç —Å–∫—Ä–∏–ø—Ç–∞ –º–∞–ª–æ–≥–æ\\n–î–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–∞–∑—É–º–æ–≤ –±–æ–ª—å—à–∏—Ö.\\n–¢—ã –≤ Data Science —Å—Ç–∞–ª —É–∂–µ –ø—Ä–∏–∑–Ω–∞–Ω–Ω—ã–º,\\n–ò –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ‚Äî —Ç–≤–æ–π —Å—Ç–∏—Ö.\\n\\n–¢—ã –¥—Ä—É–∂–µ–ª—é–±–µ–Ω –∫ —Ç–µ–º, –∫—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç,\\n–ò –≥–æ—Å–ø–æ–¥–∏–Ω –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö —É–º–æ–≤.\\n–¢—ã –æ–±–µ—Ä–Ω—É–ª –≤ —É–¥–æ–±—Å—Ç–≤–æ –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è,\\n–ß—Ç–æ–± –∫–∞–∂–¥—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –±—ã–ª –≤–Ω–æ–≤—å –≥–æ—Ç–æ–≤.\\n\\n–¢–≤–æ–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚Äî –∫–∞–∫ –ø–æ–ª—è —Ü–≤–µ—Ç—É—â–∏–µ,\\n–ì–¥–µ –∫–∞–∂–¥—ã–π —Ü–≤–µ—Ç–æ–∫ ‚Äî –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥, –∫–ª–∞—Å—Å.\\n–û—Ç Django –∫ Flask ‚Äî –ø—É—Ç–∏ –∑–æ–≤—É—â–∏–µ,\\n–í –º–∏—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —á—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç –Ω–∞—Å.\\n\\n–ò –ø—É—Å—Ç—å –ø–æ—Ä–æ–π –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏\\n–®—É–º—è—Ç, –∫–∞–∫ –≤–µ—Ç—Ä—ã –≤ –≥–æ–ª—ã—Ö –≤–µ—Ç–≤—è—Ö,\\n–¢—ã –æ—Å—Ç–∞–µ—à—å—Å—è –Ω–µ–∂–Ω—ã–º –∏ –≤–µ–ª–∏–∫–∏–º,\\n–ö–∞–∫ –µ—Å–µ–Ω–∏–Ω—Å–∫–∞—è –≥—Ä—É—Å—Ç—å –≤ —Å—Ç–∏—Ö–∞—Ö.\\n\\n–¢–∞–∫ –±—É–¥—å –∂–µ, Python, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω—å–µ–º –≤–µ—á–Ω—ã–º,\\n–î–ª—è —Ç–µ—Ö, –∫—Ç–æ –∏—â–µ—Ç –∏—Å—Ç–∏–Ω—É –∏ —Å–≤–µ—Ç.\\n–¢—ã —Å—Ç–∞–ª –¥–ª—è –º–Ω–æ–≥–∏—Ö –∏ —É—Ç–µ—Ö–æ–π, –∏ –ª–µ—á–µ–Ω–∏–µ–º,\\n–ò –ª—É—á—à–∏–º —è–∑—ã–∫–æ–º, —á—Ç–æ —Ç–æ–ª—å–∫–æ –µ—Å—Ç—å!\\n\\n–ù–∞–¥–µ—é—Å—å, —ç—Ç–æ—Ç —Å—Ç–∏—Ö –ø–µ—Ä–µ–¥–∞—ë—Ç –ø—Ä–æ—Å—Ç–æ—Ç—É –∏ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ—Å—Ç—å Python, –∞ —Ç–∞–∫–∂–µ –µ–≥–æ –º–æ—â—å –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å, —Å –ª—ë–≥–∫–æ–π –≥—Ä—É—Å—Ç—å—é –∏ –ª–∏—Ä–∏—á–Ω–æ—Å—Ç—å—é, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–æ–π –¥–ª—è –ï—Å–µ–Ω–∏–Ω–∞.', additional_kwargs={}, example=False), AIMessageChunk(content='', id='run-4e0fbb1e-4e7b-4b5f-a8f9-4b3f5b3b3b3b')]", 'reasoning': None}], 'usage': {'prompt_tokens': 7, 'completion_tokens': 661, 'total_tokens': 668, 'prompt_tokens_details': None}}}


2025-09-11 00:20:54,059 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=61.6502s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 271, in __aiter__
    async for part in self._httpcore_stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 407, in __aiter__
    raise exc from None
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 403, in __aiter__
    async for part in self._stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 342, in __aiter__
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 334, in __aiter__
    async for chunk in self._connection._receive_response_body(**kwargs):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 203, in _receive_response_body
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 32, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 14, in post_model_prompt
    response = await open_router_client.post_prompt(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/openrouter/client.py", line 25, in post_prompt
    r = await self._post(url="/completions", json={
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 64, in _post
    return await self._make_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 32, in _make_request
    response = await client.request(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1643, in send
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1637, in send
    await response.aread()
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 979, in aread
    self._content = b"".join([part async for part in self.aiter_bytes()])
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 997, in aiter_bytes
    async for raw_bytes in self.aiter_raw():
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 1055, in aiter_raw
    async for raw_stream_bytes in self.stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 176, in __aiter__
    async for chunk in self._stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 270, in __aiter__
    with map_httpcore_exceptions():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

2025-09-11 00:24:15,344 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=32.5454s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 32, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 177, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'missing', 'loc': ('response', 'text'), 'msg': 'Field required', 'input': {'id': 'gen-1757539423-cnCib9aXiX71QECS7tlI', 'provider': 'DeepInfra', 'model': 'deepseek/deepseek-chat-v3.1:free', 'object': 'chat.completion', 'created': 1757539423, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'text': ' –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ."\n    },\n    {\n      "role": "assistant",\n      "content": "–ö–æ–Ω–µ—á–Ω–æ, –≤–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:\\n\\n**–í–∞—Ä–∏–∞–Ω—Ç 1 (–ë–æ–ª–µ–µ –ª–∏—Ä–∏—á–Ω—ã–π)**\\n\\nPython, —è–∑—ã–∫ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –∏ –º–æ–≥—É—á–∏–π,\\n–î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ –æ–Ω ‚Äî –ª—É—á—à–∏–π, –Ω–µ—Ç—É –∫—Ä—É—á–µ.\\n–û—Ç—Å—Ç—É–ø—ã –≤ –Ω—ë–º ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–±–µ–ª—ã,\\n–ê —Ü–µ–ª–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –∏ –º–µ—Ç–æ–¥ —Å–º–µ–ª—ã–π.\\n\\n–û–Ω –¥—Ä—É–∂–∏—Ç —Å –¥–∞–Ω–Ω—ã–º–∏, —Ç–≤–æ—Ä–∏—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–∏,\\n–í–µ–¥—ë—Ç —Å–∞–π—Ç—ã, —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∫–∏ —ç—Ç–∏.\\n–û—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –¥–æ –Ω–∞—É–∫–∏ —Å–ª–æ–∂–Ω–æ–π ‚Äî\\n–û–Ω –≥–∏–±–æ–∫, –º–æ—â–µ–Ω –∏ –¥—É—à–æ—é —Å—Ç—Ä–æ–≥–æ–π.\\n\\n¬´–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π¬ª –±–∏–±–ª–∏–æ—Ç–µ–∫—É ‚Äî –∏ –≤–æ—Ç,\\n–£–∂–µ –≥–æ—Ç–æ–≤ –º–æ–≥—É—á–∏–π –ø–æ–≤–æ—Ä–æ—Ç.\\n–ò –Ω–µ—Ç –ø—Ä–µ–≥—Ä–∞–¥ –¥–ª—è —Å–º–µ–ª–æ–π –µ–≥–æ –º—ã—Å–ª–∏,\\n–ß—Ç–æ Python –∑–∞–¥—É–º–∞–ª ‚Äî –≤—Å—ë —Å–æ–≤–µ—Ä—à–∏–ª–∏.\\n\\n**–í–∞—Ä–∏–∞–Ω—Ç 2 (–ë–æ–ª–µ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∏ —Å —é–º–æ—Ä–æ–º)**\\n\\n–ï—Å—Ç—å –º–Ω–æ–≥–æ —è–∑—ã–∫–æ–≤ —É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞,\\n–ù–æ Python ‚Äî –º–∞—à–∏–Ω–Ω—ã–π –ª–∏–Ω–≥–≤–∏—Å—Ç.\\n–ß–∏—Ç–∞–µ—Ç—Å—è, –∫–∞–∫ –ø—Ä–æ—Å—Ç–∞—è –ø–æ–≤–µ—Å—Ç—å,\\n–ù–µ—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∏—Å–∫—Ä–µ–Ω–Ω–∏–π –∏–Ω—Ç–µ—Ä–µ—Å.\\n\\n–ù–µ –Ω—É–∂–Ω—ã —Ç—É—Ç —Å–∫–æ–±–∫–∏ —Ñ–∏–≥—É—Ä–Ω—ã–µ,\\n–õ–∏—à—å –æ—Ç—Å—Ç—É–ø—ã ‚Äî –≤–∞–∂–Ω—ã –∏ —Ö–∏—Ç—Ä—ã–µ.\\n¬´Hello, World!¬ª ‚Äî –Ω–∞–ø–∏—à–µ—à—å —Ç—ã –≤–º–∏–≥–µ,\\n–ò –ø–æ–±–µ–≥—É—Ç —Å—Ç—Ä–æ—á–∫–∏ –ø–æ —Å—Ç—Ä–æ–≥–∏–º –¥–æ—Ä–æ–≥–∞–º.\\n\\n–°–ø–∏—Å–æ–∫, —Å–ª–æ–≤–∞—Ä—å –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞, –∫–æ—Ä—Ç–µ–∂–∏ ‚Äî\\n–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –Ω–∞–º —Ç–∞–∫ –¥–æ—Ä–æ–≥–∏.\\n–ú–∞—à–∏–Ω–Ω–æ–µ learning –∏ –±–æ–ª—å—à–æ–π DataFrame ‚Äî\\n–í–µ–∑–¥–µ –Ω–∞—à –ü–∏—Ç–æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º.\\n\\n**–í–∞—Ä–∏–∞–Ω—Ç 3 (–ö–æ—Ä–æ—Ç–∫–∏–π)**\\n\\n–£–º–Ω—ã–π, –ø—Ä–æ—Å—Ç–æ–π, —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π Python.\\n–û–Ω –≤ —Å–µ—Ä–¥—Ü–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø–æ—Å–µ–ª–∏–ª—Å—è.\\n–° –Ω–∏–º –ª—é–±–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —è—Å–Ω—ã–º,\\n–ê –∫–æ–¥ ‚Äî —á–∏—Ç–∞–µ–º—ã–º –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º.\\n\\n–ù–∞–ø–∏—à–µ—à—å `import this` ‚Äî –∏ –≤–æ—Ç –æ–Ω, –¥–∑–µ–Ω,\\n–î–ª—è –∑–∞–¥–∞—á –ª—é–±—ã—Ö –æ–Ω —Ç–µ–ø–µ—Ä—å –≤–æ–æ—Ä—É–∂—ë–Ω!"\n    }\n  ]\n}', 'reasoning': None}], 'usage': {'prompt_tokens': 7, 'completion_tokens': 489, 'total_tokens': 496, 'prompt_tokens_details': None}}}


2025-09-11 00:27:40,915 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=75.5537s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 32, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 177, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'missing', 'loc': ('response', 'text'), 'msg': 'Field required', 'input': {'id': 'gen-1757539585-iw4XVILxpcTp84MulOLH', 'provider': 'DeepInfra', 'model': 'deepseek/deepseek-chat-v3.1:free', 'object': 'chat.completion', 'created': 1757539585, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'text': ' –∏ –≥–¥–µ –µ–≥–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç —Å —é–º–æ—Ä–æ–º.\',\n        \'temperature\': 0.7,\n        \'max_tokens\': 500,\n        \'top_p\': 1.0,\n        \'frequency_penalty\': 0.0,\n        \'presence_penalty\': 0.0,\n        \'stop\': [\'\\n\']\n    }\n    try:\n        response = openai.Completion.create(**params)\n        return response.choices[0].text.strip()\n    except Exception as e:\n        return f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∏—Ö–∞: {str(e)}"\n\ndef generate_image(prompt):\n    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é"""\n    try:\n        response = openai.Image.create(\n            prompt=prompt,\n            n=1,\n            size="512x512"\n        )\n        return response[\'data\'][0][\'url\']\n    except Exception as e:\n        return f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: {str(e)}"\n\ndef main():\n    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""\n    st.title("üé≠ –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ —Å OpenAI")\n    \n    st.sidebar.header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏")\n    api_key = st.sidebar.text_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à OpenAI API –∫–ª—é—á:", type="password")\n    \n    if api_key:\n        openai.api_key = api_key\n        \n        option = st.radio(\n            "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:",\n            ["üìù –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç", "üé® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", "üìú –ù–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∏—Ö"]\n        )\n        \n        if option == "üìù –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç":\n            st.subheader("–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞")\n            prompt = st.text_area("–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞:", \n                                "–ù–∞–ø–∏—à–∏ —Ä–∞—Å—Å–∫–∞–∑ –æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏")\n            \n            if st.button("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç"):\n                with st.spinner("–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç..."):\n                    result = generate_text(prompt)\n                    st.text_area("–†–µ–∑—É–ª—å—Ç–∞—Ç:", result, height=300)\n        \n        elif option == "üé® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ":\n            st.subheader("–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π")\n            prompt = st.text_input("–û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:", \n                                  "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ç –≤ —Å–∫–∞—Ñ–∞–Ω–¥—Ä–µ")\n            \n            if st.button("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"):\n                with st.spinner("–°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ..."):\n                    image_url = generate_image(prompt)\n                    \n                    if image_url.startswith("http"):\n                        st.image(image_url, caption="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", use_column_width=True)\n                        st.success("–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ!")\n                    else:\n                        st.error(image_url)\n        \n        elif option == "üìú –ù–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∏—Ö":\n            st.subheader("–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∏—Ö–æ–≤")\n            \n            if st.button("–ù–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∏—Ö –ø—Ä–æ Python"):\n                with st.spinner("–°–æ—á–∏–Ω—è–µ–º —Å—Ç–∏—Ö..."):\n                    poem = generate_poem()\n                    st.text_area("–°—Ç–∏—Ö:", poem, height=200)\n                    st.success("–°—Ç–∏—Ö –≥–æ—Ç–æ–≤!")\n    \n    else:\n        st.warning("‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏")\n        st.info("""\n        **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á:**\n        1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [OpenAI Platform](https://platform.openai.com)\n        2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç\n        3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª API Keys\n        4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á\n        """)\n\nif __name__ == "__main__":\n    main()', 'reasoning': None}], 'usage': {'prompt_tokens': 7, 'completion_tokens': 790, 'total_tokens': 797, 'prompt_tokens_details': None}}}


2025-09-11 00:55:45,773 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=25.3957s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 32, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 177, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'missing', 'loc': ('response', 'text'), 'msg': 'Field required', 'input': {'id': 'gen-1757541320-N2Y4R9n692GveQUJqUEA', 'provider': 'DeepInfra', 'model': 'deepseek/deepseek-chat-v3.1:free', 'object': 'chat.completion', 'created': 1757541321, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'text': ', –≥–¥–µ –±—É–¥—É—Ç —É–ø–æ–º–∏–Ω–∞—Ç—å—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —è–∑—ã–∫–∞ –∏ –µ–≥–æ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è.",\n    "temperature": 0.7,\n    "max_tokens": 150\n  },\n  "response": {\n    "id": "chatcmpl-9VqQd5u7V2UJ2wYgU7UQqJ2q2Z2X2",\n    "object": "chat.completion",\n    "created": 1716829246,\n    "model": "gpt-4-turbo-2024-04-09",\n    "choices": [\n      {\n        "index": 0,\n        "message": {\n          "role": "assistant",\n          "content": "–í –º–∏—Ä–µ –∫–æ–¥–∞ —Ü–∞—Ä–∏—Ç Python, –∫—Ä–∞—Å–∏–≤—ã–π,\\n–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å ‚Äî –µ–≥–æ –∑–∞–∫–æ–Ω —Å—á–∞—Å—Ç–ª–∏–≤—ã–π.\\n–û—Ç—Å—Ç—É–ø—ã –≤–º–µ—Å—Ç–æ —Å–∫–æ–±–æ–∫ ‚Äî –≤–æ—Ç –µ–≥–æ —á–µ—Ä—Ç–∞,\\n–ò —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É –æ–±–ª–µ–≥—á–∞–µ—Ç –∂–∏–∑–Ω—å —Å–ø–æ–ª–Ω–∞.\\n\\n¬´–Ø–≤–Ω–æ–µ –ª—É—á—à–µ –Ω–µ—è–≤–Ω–æ–≥–æ¬ª ‚Äî —Ç–∞–∫ –≥–ª–∞—Å–∏—Ç –î–∑–µ–Ω,\\n–ò —ç—Ç–æ–º—É —Å–ª–µ–¥—É–µ—Ç –∫–∞–∂–¥—ã–π, –∫—Ç–æ –≤–ª—é–±–ª—ë–Ω.\\n–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è ‚Äî –ª–µ–≥–∫–æ—Å—Ç—å –∏ –ø–æ–ª—ë—Ç,\\n–ù–æ —Å —Å—Ç—Ä–æ–≥–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–æ–¥ –µ–≥–æ –∂–∏–≤—ë—Ç.\\n\\n–û—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –¥–æ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º\\n–û–Ω –º–æ—â—å—é —Å–≤–æ–µ–π –ø–æ–∫–æ—Ä—è–µ—Ç –≤—Å–µ—Ö —Å–æ–≤—Å–µ–º.\\n–ò —Å —Ñ–∏–ª–æ—Å–æ—Ñ–∏–µ–π ¬´–ï—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–±¬ª\\n–û–Ω –≤ —Å–µ—Ä–¥—Ü–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç –ø—É—Ç—å –∏ —Ä–æ—Å."\n        },\n        "logprobs": null,\n        "finish_reason": "stop"\n      }\n    ],\n    "usage": {\n      "prompt_tokens": 24,\n      "completion_tokens": 150,\n      "total_tokens": 174\n    },\n    "system_fingerprint": "fp_3b95652912"\n  }\n}', 'reasoning': None}], 'usage': {'prompt_tokens': 7, 'completion_tokens': 398, 'total_tokens': 405, 'prompt_tokens_details': None}}}


2025-09-11 01:02:18,061 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=66.5598s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 32, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 14, in post_model_prompt
    response = await open_router_client.post_prompt(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/openrouter/client.py", line 25, in post_prompt
    r = await self._post(url="/completions", json={
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 64, in _post
    return await self._make_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 32, in _make_request
    response = await client.request(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

2025-09-11 01:08:55,895 - INFO - OK | POST /generate | handler=post_model_prompt | time=50.0884s | status_code=200
2025-09-11 01:15:40,296 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0002s | status_code=200
2025-09-11 01:15:40,434 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0033s | status_code=200
2025-09-11 01:15:44,462 - INFO - OK | GET /models | handler=get_models_names | time=0.5164s | status_code=200
2025-09-11 01:15:45,953 - INFO - OK | GET /models | handler=get_models_names | time=0.0019s | status_code=200
2025-09-11 01:17:16,436 - INFO - OK | POST /generate | handler=post_model_prompt | time=26.6293s | status_code=200
2025-09-11 01:33:04,860 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0004s | status_code=200
2025-09-11 01:33:05,082 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0153s | status_code=200
2025-09-11 01:33:16,027 - ERROR - ClientError | POST /generate | handler=post_model_prompt | time=0.5284s

2025-09-11 01:35:36,761 - ERROR - ClientError | POST /generate | handler=post_model_prompt | time=0.5819s

2025-09-11 01:37:19,023 - ERROR - ClientError | POST /generate | handler=post_model_prompt | time=0.4594s

2025-09-11 01:39:38,347 - INFO - OK | POST /generate | handler=post_model_prompt | time=42.9548s | status_code=200
2025-09-11 01:53:11,484 - ERROR - ClientError | GET /models | handler=get_models_names | time=0.0003s

2025-09-11 01:54:50,807 - ERROR - ClientError | GET /models | handler=get_models_names | time=8.0310s

2025-09-11 15:41:06,394 - INFO - OK | GET / | handler=None | time=0.0005s | status_code=404
2025-09-11 15:41:10,793 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0006s | status_code=200
2025-09-11 15:41:10,943 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0204s | status_code=200
2025-09-11 15:41:24,087 - INFO - OK | GET /models | handler=get_models_names | time=0.4419s | status_code=200
2025-09-11 15:43:16,973 - ERROR - UnhandledException | POST /benchmark | handler=benchmark | time=0.0139s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 31, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 55, in benchmark
    metrics = await run_benchmark(prompts, model, runs, concurrency, max_tokens)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/benchmarker/run_utils.py", line 55, in run_benchmark
    save_benchmark_results(model, results)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/benchmarker/file_utils.py", line 19, in save_benchmark_results
    filepath = settings.BENCHMARKS_DIR / filename
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/pydantic/main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'BENCHMARKS_DIR'

2025-09-11 15:44:01,903 - ERROR - UnhandledException | POST /benchmark | handler=benchmark | time=0.0039s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 31, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 55, in benchmark
    metrics = await run_benchmark(prompts, model, runs, concurrency, max_tokens)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/benchmarker/run_utils.py", line 55, in run_benchmark
    save_benchmark_results(model, results)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/benchmarker/file_utils.py", line 21, in save_benchmark_results
    with open(filepath, mode="w", newline="", encoding="utf-8") as f:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
FileNotFoundError: [Errno 2] No such file or directory: '/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/benchmarks/benchmark_results_deepseek/deepseek-chat-v3.1:free_20250911_154401.csv'

2025-09-11 15:45:24,756 - ERROR - UnhandledException | POST /benchmark | handler=benchmark | time=0.0036s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 31, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 55, in benchmark
    metrics = await run_benchmark(prompts, model, runs, concurrency, max_tokens)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/benchmarker/run_utils.py", line 66, in run_benchmark
    "failed_runs": sum(1 for _, _, _, error in results if error is not None),
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/benchmarker/run_utils.py", line 66, in <genexpr>
    "failed_runs": sum(1 for _, _, _, error in results if error is not None),
                             ^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 4)

2025-09-11 15:46:18,025 - INFO - OK | POST /benchmark | handler=benchmark | time=0.0047s | status_code=200
2025-09-11 15:52:27,357 - INFO - OK | POST /benchmark | handler=benchmark | time=240.9469s | status_code=200
2025-09-11 16:46:29,459 - INFO - OK | POST /generate | handler=post_model_prompt | time=35.7399s | status_code=200
2025-09-11 16:49:53,974 - ERROR - UnhandledException | POST /generate | handler=post_model_prompt | time=63.8141s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 271, in __aiter__
    async for part in self._httpcore_stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 407, in __aiter__
    raise exc from None
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 403, in __aiter__
    async for part in self._stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 342, in __aiter__
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 334, in __aiter__
    async for chunk in self._connection._receive_response_body(**kwargs):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 203, in _receive_response_body
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 31, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 24, in post_model_prompt
    response = await open_router_client.post_prompt(prompt, max_tokens)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/openrouter/client.py", line 30, in post_prompt
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 88, in _post
    return await self._make_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py", line 153, in iter
    result = await action(retry_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/tenacity/_utils.py", line 99, in inner
    return call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 400, in <lambda>
    self._add_action_func(lambda rs: rs.outcome.result())
                                     ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/base/client.py", line 56, in _make_request
    response = await client.request(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1643, in send
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1637, in send
    await response.aread()
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 979, in aread
    self._content = b"".join([part async for part in self.aiter_bytes()])
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 997, in aiter_bytes
    async for raw_bytes in self.aiter_raw():
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_models.py", line 1055, in aiter_raw
    async for raw_stream_bytes in self.stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_client.py", line 176, in __aiter__
    async for chunk in self._stream:
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 270, in __aiter__
    with map_httpcore_exceptions():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

2025-09-11 16:56:43,945 - INFO - OK | POST /generate | handler=post_model_prompt | time=35.1511s | status_code=200
2025-09-11 16:59:46,016 - INFO - OK | POST /generate | handler=post_model_prompt | time=15.9972s | status_code=200
2025-09-11 17:01:39,418 - INFO - OK | POST /generate | handler=post_model_prompt | time=21.9260s | status_code=200
2025-09-11 17:03:54,737 - INFO - OK | POST /generate | handler=post_model_prompt | time=16.9673s | status_code=200
2025-09-11 17:08:11,016 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0010s | status_code=200
2025-09-11 17:08:11,376 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0122s | status_code=200
2025-09-11 17:16:28,988 - INFO - OK | POST /benchmark | handler=benchmark | time=481.0109s | status_code=200
2025-09-11 18:15:17,585 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0007s | status_code=200
2025-09-11 18:15:17,933 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0106s | status_code=200
2025-09-11 18:16:19,114 - ERROR - UnhandledException | POST /benchmark | handler=benchmark | time=46.9557s
Traceback:
Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/logger.py", line 31, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/api/endpoints.py", line 55, in benchmark
    metrics = await run_benchmark(prompts, model, runs, concurrency, max_tokens)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/benchmarker/run_utils.py", line 56, in run_benchmark
    save_benchmark_results(model, results)
  File "/home/arina/PycharmProjects/bic-test-repository-llm/llm-test-task/app/src/services/benchmarker/file_utils.py", line 24, in save_benchmark_results
    for model, prompt, run, latency, error in results:
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 5, got 4)

2025-09-11 18:18:08,570 - INFO - OK | POST /benchmark | handler=benchmark | time=47.3498s | status_code=200
2025-09-11 18:34:00,757 - INFO - OK | POST /benchmark | handler=benchmark | time=780.6997s | status_code=200
2025-09-11 18:51:25,107 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0008s | status_code=200
2025-09-11 18:51:25,408 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0102s | status_code=200
2025-09-11 18:56:45,820 - INFO - OK | POST /benchmark | handler=benchmark | time=23.8162s | status_code=200
2025-09-11 19:03:55,258 - INFO - OK | POST /benchmark | handler=benchmark | time=406.1293s | status_code=200
2025-09-11 19:24:37,717 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0009s | status_code=200
2025-09-11 19:24:38,161 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0073s | status_code=200
2025-09-11 19:29:41,759 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0009s | status_code=200
2025-09-11 19:29:41,968 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0107s | status_code=200
2025-09-11 19:30:01,918 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:30:07,399 - ERROR - {'status_code': 429, 'detail': '{"error":{"message":"Rate limit exceeded: free-models-per-day. Add 10 credits to unlock 1000 free model requests per day","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"50","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1757635200000"},"provider_name":null}},"user_id":"user_32I1nV8RFSjzCL0UY0DrAgIaRZU"}'}
2025-09-11 19:30:07,399 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:30:12,633 - ERROR - {'status_code': 429, 'detail': '{"error":{"message":"Rate limit exceeded: free-models-per-day. Add 10 credits to unlock 1000 free model requests per day","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"50","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1757635200000"},"provider_name":null}},"user_id":"user_32I1nV8RFSjzCL0UY0DrAgIaRZU"}'}
2025-09-11 19:30:12,634 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:30:17,251 - ERROR - {'status_code': 429, 'detail': '{"error":{"message":"Rate limit exceeded: free-models-per-day. Add 10 credits to unlock 1000 free model requests per day","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"50","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1757635200000"},"provider_name":null}},"user_id":"user_32I1nV8RFSjzCL0UY0DrAgIaRZU"}'}
2025-09-11 19:30:17,252 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:30:21,749 - ERROR - {'status_code': 429, 'detail': '{"error":{"message":"Rate limit exceeded: free-models-per-day. Add 10 credits to unlock 1000 free model requests per day","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"50","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1757635200000"},"provider_name":null}},"user_id":"user_32I1nV8RFSjzCL0UY0DrAgIaRZU"}'}
2025-09-11 19:30:21,749 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:30:27,072 - ERROR - {'status_code': 429, 'detail': '{"error":{"message":"Rate limit exceeded: free-models-per-day. Add 10 credits to unlock 1000 free model requests per day","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"50","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1757635200000"},"provider_name":null}},"user_id":"user_32I1nV8RFSjzCL0UY0DrAgIaRZU"}'}
2025-09-11 19:30:27,072 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:30:31,680 - ERROR - {'status_code': 429, 'detail': '{"error":{"message":"Rate limit exceeded: free-models-per-min. ","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"16","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1757608260000"},"provider_name":null}},"user_id":"user_32I1nV8RFSjzCL0UY0DrAgIaRZU"}'}
2025-09-11 19:30:31,680 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:30:35,775 - ERROR - {'status_code': 429, 'detail': '{"error":{"message":"Rate limit exceeded: free-models-per-min. ","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"16","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1757608260000"},"provider_name":null}},"user_id":"user_32I1nV8RFSjzCL0UY0DrAgIaRZU"}'}
2025-09-11 19:30:35,776 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:30:39,770 - ERROR - {'status_code': 429, 'detail': '{"error":{"message":"Rate limit exceeded: free-models-per-min. ","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"16","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1757608260000"},"provider_name":null}},"user_id":"user_32I1nV8RFSjzCL0UY0DrAgIaRZU"}'}
2025-09-11 19:30:39,772 - INFO - OK | POST /benchmark | handler=benchmark | time=37.8562s | status_code=200
2025-09-11 19:31:59,866 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:31:59,868 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:33:32,981 - ERROR - {'_request': <Request('POST', 'https://openrouter.ai/api/v1/completions')>}
2025-09-11 19:33:32,982 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:33:32,984 - ERROR - {'_request': <Request('POST', 'https://openrouter.ai/api/v1/completions')>}
2025-09-11 19:33:32,984 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:35:20,415 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0029s | status_code=200
2025-09-11 19:35:20,736 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0476s | status_code=200
2025-09-11 19:35:58,251 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-11 19:35:58,255 - INFO - STARTED SINGLE PROMPT IN BENCHMARK
2025-09-12 00:35:45,137 - INFO - OK | GET / | handler=None | time=0.0003s | status_code=404
2025-09-12 00:35:45,180 - INFO - OK | GET /favicon.ico | handler=None | time=0.0003s | status_code=404
2025-09-12 00:35:50,769 - INFO - OK | GET /docs | handler=swagger_ui_html | time=0.0001s | status_code=200
2025-09-12 00:35:50,865 - INFO - OK | GET /openapi.json | handler=openapi | time=0.0127s | status_code=200
2025-09-12 00:35:59,901 - INFO - OK | GET /models | handler=get_models_names | time=0.4029s | status_code=200
2025-09-12 00:36:01,498 - INFO - OK | GET /models | handler=get_models_names | time=0.0026s | status_code=200
2025-09-12 00:36:51,609 - ERROR - ClientError | POST /generate | handler=post_model_prompt | time=1.1796s

2025-09-12 00:37:31,957 - ERROR - ClientError | POST /generate | handler=post_model_prompt | time=5.1878s

2025-09-12 00:40:55,686 - INFO - OK | POST /generate | handler=post_model_prompt | time=9.2589s | status_code=200
2025-09-12 00:42:33,582 - INFO - OK | POST /generate | handler=post_model_prompt | time=7.1564s | status_code=200
2025-09-12 00:44:53,891 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:44:57,833 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 2
2025-09-12 00:45:02,813 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 3
2025-09-12 00:45:12,776 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 4
2025-09-12 00:45:20,644 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 5
2025-09-12 00:45:33,057 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:45:41,638 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 2
2025-09-12 00:45:53,718 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 3
2025-09-12 00:46:05,391 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 4
2025-09-12 00:46:14,203 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 5
2025-09-12 00:46:22,490 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:46:32,916 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 2
2025-09-12 00:46:43,367 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 3
2025-09-12 00:46:50,036 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 4
2025-09-12 00:46:59,660 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 5
2025-09-12 00:47:14,816 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:47:22,925 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 2
2025-09-12 00:47:27,206 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 3
2025-09-12 00:47:37,138 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 4
2025-09-12 00:47:44,010 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 5
2025-09-12 00:47:51,076 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:48:00,495 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 2
2025-09-12 00:48:08,480 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 3
2025-09-12 00:48:20,453 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 4
2025-09-12 00:48:33,047 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 5
2025-09-12 00:48:37,319 - INFO - OK | POST /benchmark | handler=benchmark | time=223.4414s | status_code=200
2025-09-12 00:49:38,151 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:49:45,337 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:49:53,718 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:50:02,320 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:50:11,153 - INFO - STARTED SINGLE PROMPT IN BENCHMARK MODEL: tngtech/deepseek-r1t-chimera:free, RUN: 1
2025-09-12 00:50:25,180 - INFO - OK | POST /benchmark | handler=benchmark | time=47.0304s | status_code=200

